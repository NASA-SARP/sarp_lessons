
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Accessing Data &#8212; SARP Programming Lessons</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Visualization" href="../Visualization/index.html" />
    <link rel="prev" title="Working with rasters" href="2_raster_fundamentals.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/sarp_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">SARP Programming Lessons</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../index.html">
   Welcome to SARP Programming
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lessons
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../lessons/general_python/index.html">
   General Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/1_variables_types_ifstatements.html">
     Variables, Data Types, and if Statements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/2_lists_dictionaries.html">
     Lists and Dictionaries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/datetimes.html">
     Datetimes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/spatial_data.html">
     Spatial Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../lessons/gridded_data/index.html">
   Gridded Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/gridded_data/1_xarray.html">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       xarray
      </span>
     </code>
     Library
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/gridded_data/2_xarray_computation.html">
     Starting Computations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/gridded_data/3_xarray_groupby.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       xarray
      </span>
     </code>
     Groupby
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../lessons/tabular_data/index.html">
   Tabular Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/1_pandas.html">
     The
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas
      </span>
     </code>
     Library
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/2_filtering_groupby.html">
     Filtering and groupby
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/3_geopandas.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       geopandas
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/static_visualization_matplotlib.html">
     Static Visualization with
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Additional Lectures
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Debugging/debugging_lesson.html">
   Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../time_series_statistics/oceans_stats_examples.html">
   Time Series Statistics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../hierarchical_data/hierarchical_data.html">
   Hierarchical Data Structure
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Raster data lessons
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="1_arrays_numpy.html">
     Arrays and
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2_raster_fundamentals.html">
     Working with rasters
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Accessing Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Visualization/index.html">
   Visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Visualization/2_building_on_matplotlib.html">
     Building on top of
     <code class="docutils literal notranslate">
      <span class="pre">
       matplotlib
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Visualization/3_dynamic_visualization.html">
     Dynamic Visualization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Visualization/viewing_images.html">
     Viewing Images
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Practice Sheets
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../lessons/index_practice.html">
   General Python Practice
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/1_variables_data_practice.html">
     Variables, Data Types and If statements Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/2_lists_dicts_practice.html">
     Lists and Dictionaries Answers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/datetimes_practice.html">
     Datetimes Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/spatial_data_practice.html">
     Spatial Data Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/1_variables_data_answers.html">
     Variables, Data Types and If statements Answers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/2_lists_dicts_answers.html">
     Lists and Dictionaries Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/datetimes_answers.html">
     Datetimes Answers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/general_python/practice/spatial_data_answers.html">
     Spatial Data Answers
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../lessons/index_practice_raster.html">
   Gridded Data Practice
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/gridded_data/practice/1_xarray_practice.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       xarray
      </span>
     </code>
     Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/gridded_data/practice/2_xarray_practice.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       xarray
      </span>
     </code>
     Computation Practice
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../lessons/index_practice_tabular.html">
   Tabular Data Practice
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/practice/1_pandas_practice.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas
      </span>
     </code>
     Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/practice/2_filtering_groupby_practice.html">
     Filtering and Groupby Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/practice/3_geopandas_practice.html">
     Practice with
     <code class="docutils literal notranslate">
      <span class="pre">
       geopandas
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/practice/1_pandas_answers.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas
      </span>
     </code>
     Answers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../lessons/tabular_data/practice/2_filtering_groupby_answers.html">
     Filtering and Groupby Answers
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../index_practice.html">
   Raster Data Practice (Additional Lectures)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="practice/1_arrays_numpy_practice.html">
     Arrays and
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
     Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="practice/2_raster_fundamentals_practice.html">
     Raster Fundamentals Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="practice/3_accessing_coordinates_practice.html">
     Accessing Coordinates Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="practice/1_arrays_numpy_answers.html">
     Arrays and
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
     Answers
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/additional_lectures/rasters/3_accessing_coordinates.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/rwegener2/sarp_lessons"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/rwegener2/sarp_lessons/issues/new?title=Issue%20on%20page%20%2Fadditional_lectures/rasters/3_accessing_coordinates.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#context">
   Context
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accessing-raster-coordinates">
   Accessing Raster Coordinates
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-aviris">
     Example with AVIRIS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reprojecting-a-vector-to-epsg-4326">
     Reprojecting a vector to epsg:4326
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-1">
       Example 1
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-2">
       Example 2
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#affine-transformations">
   Affine Transformations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-affine-to-get-the-coordinates-of-a-particular-grid-cell">
     Using the affine to get the coordinates of a particular grid cell
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-inverse-affine-to-get-the-pixel-of-a-coordinate">
     Using the inverse affine to get the pixel of a coordinate
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subsetting-data">
   Subsetting Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#memory-vs-storage">
     Memory vs. Storage
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-indexes-to-subset-data">
     Using Indexes to subset data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-window-to-subset-data">
   Using
   <code class="docutils literal notranslate">
    <span class="pre">
     Window
    </span>
   </code>
   to subset data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-the-window-object">
     Creating the
     <code class="docutils literal notranslate">
      <span class="pre">
       Window
      </span>
     </code>
     object
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sytnax-1">
       Sytnax #1
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#syntax-2">
       Syntax #2
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reading-the-data-with-the-window">
     Reading the data with the
     <code class="docutils literal notranslate">
      <span class="pre">
       Window
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#language-agnostic-what-s-my-workflow">
   Language Agnostic: What’s my workflow?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questions-to-consider">
     Questions to consider
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coding-in-python-in-notebooks">
     Coding in Python in notebooks
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Accessing Data</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#context">
   Context
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#accessing-raster-coordinates">
   Accessing Raster Coordinates
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-aviris">
     Example with AVIRIS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reprojecting-a-vector-to-epsg-4326">
     Reprojecting a vector to epsg:4326
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-1">
       Example 1
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-2">
       Example 2
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#affine-transformations">
   Affine Transformations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-affine-to-get-the-coordinates-of-a-particular-grid-cell">
     Using the affine to get the coordinates of a particular grid cell
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-inverse-affine-to-get-the-pixel-of-a-coordinate">
     Using the inverse affine to get the pixel of a coordinate
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subsetting-data">
   Subsetting Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#memory-vs-storage">
     Memory vs. Storage
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-indexes-to-subset-data">
     Using Indexes to subset data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-window-to-subset-data">
   Using
   <code class="docutils literal notranslate">
    <span class="pre">
     Window
    </span>
   </code>
   to subset data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-the-window-object">
     Creating the
     <code class="docutils literal notranslate">
      <span class="pre">
       Window
      </span>
     </code>
     object
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sytnax-1">
       Sytnax #1
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#syntax-2">
       Syntax #2
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reading-the-data-with-the-window">
     Reading the data with the
     <code class="docutils literal notranslate">
      <span class="pre">
       Window
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#language-agnostic-what-s-my-workflow">
   Language Agnostic: What’s my workflow?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#questions-to-consider">
     Questions to consider
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coding-in-python-in-notebooks">
     Coding in Python in notebooks
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="accessing-data">
<h1>Accessing Data<a class="headerlink" href="#accessing-data" title="Permalink to this headline">¶</a></h1>
<div class="note dropdown admonition">
<p class="admonition-title">Lesson Content</p>
<ul class="simple">
<li><p>Accessing raster coordinates</p></li>
<li><p>Affine Transformations</p></li>
<li><p>Subsetting data with <code class="docutils literal notranslate"><span class="pre">Window</span></code></p></li>
</ul>
</div>
<section id="context">
<h2>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>Today we are going to revisit our AVIRIS dataset and look again at the metadata.  This time instead of focusing on properties like height and width we are going to focus on the spatial metadata, like <code class="docutils literal notranslate"><span class="pre">crs</span></code> <code class="docutils literal notranslate"><span class="pre">bounds</span></code> and <code class="docutils literal notranslate"><span class="pre">transform</span></code>.  We will also created some numpy masked arrays to start considering nodata values or ROIs.</p>
</section>
<section id="accessing-raster-coordinates">
<h2>Accessing Raster Coordinates<a class="headerlink" href="#accessing-raster-coordinates" title="Permalink to this headline">¶</a></h2>
<p>So to figure out where a particular point is on the earth we need two things:</p>
<ol class="simple">
<li><p>the EPSG code to tell us which grid we are looking at</p></li>
<li><p>our coordinates</p></li>
</ol>
<section id="example-with-aviris">
<h3>Example with AVIRIS<a class="headerlink" href="#example-with-aviris" title="Permalink to this headline">¶</a></h3>
<p>Since our AVIRIS data uses UTM grids our coordinates will be an easting and a northing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rasterio</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath_rad</span> <span class="o">=</span> <span class="s1">&#39;./data/subset_f180628t01p00r02_corr_v1k1_img&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">bounds</span>
    <span class="n">src_crs</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">crs</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;crs is &#39;</span><span class="p">,</span> <span class="n">src_crs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bbox is &#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>crs is  EPSG:32610
bbox is  BoundingBox(left=769855.79, bottom=3751257.6, right=774030.79, top=3757520.1)
</pre></div>
</div>
</div>
</div>
<p>Looking at the output of the above cell we see that the EPSG code is <code class="docutils literal notranslate"><span class="pre">32610</span></code>.  The 6 in this code tells us that we are looking at the northern hemisphere, and the <code class="docutils literal notranslate"><span class="pre">10</span></code> tells us that we are looking at UTM zone 10.</p>
</section>
<section id="reprojecting-a-vector-to-epsg-4326">
<h3>Reprojecting a vector to epsg:4326<a class="headerlink" href="#reprojecting-a-vector-to-epsg-4326" title="Permalink to this headline">¶</a></h3>
<p>Depending on why you want these coordinates the easting/northing still might not be very useful unless we can get them to latitude and longitude.  Reprojecting a whole raster is a multistep process, but in the second part of the practice yesterday we saw how to reproject a vector object, like a point or a polygon.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Transformer</span>
<span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">transform</span>
</pre></div>
</div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Transformer</span><span class="o">.</span><span class="n">from_crs</span><span class="p">(</span><span class="n">INPUT_PROJ</span><span class="p">,</span> <span class="n">OUTPUT_PROJ</span><span class="p">,</span> <span class="n">always_xy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Transformer</span><span class="o">.</span><span class="n">from_crs</span><span class="p">(</span><span class="s1">&#39;epsg:4326&#39;</span><span class="p">,</span> <span class="s1">&#39;epsg:3857&#39;</span><span class="p">,</span> <span class="n">always_xy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span>
<span class="n">transform</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">SHAPELY_POINT</span><span class="p">)</span>
</pre></div>
</div>
<section id="example-1">
<h4>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h4>
<p>Reproject a point</p>
</section>
<section id="example-2">
<h4>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h4>
<p>Reproject the bounding box</p>
<div class="tip admonition">
<p class="admonition-title">📝 Check your understanding</p>
<p>How can we figure out where our raster is located in space?</p>
</div>
</section>
</section>
</section>
<section id="affine-transformations">
<h2>Affine Transformations<a class="headerlink" href="#affine-transformations" title="Permalink to this headline">¶</a></h2>
<p>We can get the coordinates of the corners of our bounding box from the metadata, but what if we want the coordinates of some other location on our raster?  We know how to find a pixel value using rows and columns, but what about using coordinates?</p>
<p>Affine transformations are the way that we move from row, column notation (pixel space) to the notation of a coordinate reference system (usually either latitude &amp; longitude or easting &amp; northing)</p>
<p>My favorite affine transformation article is <a class="reference external" href="https://www.perrygeo.com/python-affine-transforms.html">this one</a> written by Matthew Perry.</p>
<p>Here is what an affine tranformation looks like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">transform</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>| 0.00, 16.70, 769855.79|
| 16.70,-0.00, 3751257.60|
| 0.00, 0.00, 1.00|
</pre></div>
</div>
</div>
</div>
<p>Where each number means something different:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>b</p></td>
<td><p>c</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>e</p></td>
<td><p>f</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>a = width of a pixel in units of the crs</p></li>
<li><p>b = row rotation (typically zero)</p></li>
<li><p>c = x-coordinate of the upper-left corner of the upper-left pixel</p></li>
<li><p>d = column rotation (typically zero)</p></li>
<li><p>e = height of a pixel in units of the crs (typically negative)</p></li>
<li><p>f = y-coordinate of the of the upper-left corner of the upper-left pixel</p></li>
</ul>
<p>The three numbers in the bottom row are always 0, 0, 1 (since we are working on a 2 dimensional plane).</p>
<p>So looking again at our affine transform from above we see that the size of an single pixel is 17.10 meters square and that the upper left corner of the image is located at 475,785.77, 3,350,578.50.</p>
<section id="using-the-affine-to-get-the-coordinates-of-a-particular-grid-cell">
<h3>Using the affine to get the coordinates of a particular grid cell<a class="headerlink" href="#using-the-affine-to-get-the-coordinates-of-a-particular-grid-cell" title="Permalink to this headline">¶</a></h3>
<p>The affine transform gives us some information just by looking at it, but it can also be used to convert a row, column coordiante to a grid coordinate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define which pixel we want to convert</span>
<span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">567</span>

<span class="c1"># Extract the affine transform</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">affine</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">transform</span>

<span class="c1"># Use the transform to convert our input pixel row/column to coordinates</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">affine</span> <span class="o">*</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pixel &#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="s1">&#39; corresponds to easting, northing of &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pixel  40 567  corresponds to easting, northing of  770523.79 3760726.5
</pre></div>
</div>
</div>
</div>
</section>
<section id="using-the-inverse-affine-to-get-the-pixel-of-a-coordinate">
<h3>Using the inverse affine to get the pixel of a coordinate<a class="headerlink" href="#using-the-inverse-affine-to-get-the-pixel-of-a-coordinate" title="Permalink to this headline">¶</a></h3>
<p>If you have a grid coordinate and want to find out what the row, column location is you need the inverse affine transform.  The inverse transform is calculated with the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the coordinates we want to convert</span>
<span class="n">xcoord</span><span class="p">,</span> <span class="n">ycoord</span> <span class="o">=</span> <span class="mi">475900</span><span class="p">,</span> <span class="mi">3377000</span>

<span class="c1"># Extract the affine transform</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">affine</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">transform</span>

<span class="c1"># Use the transform to convert our input coordinates to pixel row/column</span>
<span class="c1"># col, row = ~a * (x, y)</span>
<span class="n">col</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="o">~</span><span class="n">affine</span> <span class="o">*</span> <span class="p">(</span><span class="n">xcoord</span><span class="p">,</span> <span class="n">ycoord</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;row/column of my coordinates: &#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>row/column of my coordinates:  -17602.143113772454 -22410.634730538935
</pre></div>
</div>
</div>
</div>
<p>If you get a negative number here or your pixel row/column are bigger than the height or width of your raster it means you have asked for the pixel location of a point which is not located in your raster.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shape of my raster &#39;</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">src</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>shape of my raster  250 375
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">📝 Check your understanding</p>
<p>What is the purpose of an affine transform?</p>
</div>
</section>
</section>
<section id="subsetting-data">
<h2>Subsetting Data<a class="headerlink" href="#subsetting-data" title="Permalink to this headline">¶</a></h2>
<p>Subsetting your data refers to selecting some amount of data to work with that is less than the whole image.  In Python I see two main ways to do this:</p>
<ol class="simple">
<li><p>manually by dropping data from your numpy array</p></li>
<li><p>using rasterio’s windowed reading methods</p></li>
</ol>
<p>The manual option is simplier, but has the limitations that</p>
<ul class="simple">
<li><p>it is a little harder to save the output data to a new file</p></li>
<li><p>you still have to read the whole dataset into memory</p></li>
</ul>
<p>The rasterio option doesn’t have these limitations, but is a bit more complicated.</p>
<section id="memory-vs-storage">
<h3>Memory vs. Storage<a class="headerlink" href="#memory-vs-storage" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p></p></th>
<th class="text-align:center head"><p>Memory</p></th>
<th class="text-align:center head"><p>Storage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>Definition</p></td>
<td class="text-align:center"><p>how much data you can have open at one time</p></td>
<td class="text-align:center"><p>how much data you can have saved on your computer</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Persistence</p></td>
<td class="text-align:center"><p>goes away when you close the program</p></td>
<td class="text-align:center"><p>stays unless you delete it</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Size</p></td>
<td class="text-align:center"><p>volume in 10s (Ex. 32 GB RAM)</p></td>
<td class="text-align:center"><p>volume in hundreds (ex. 256 GB)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="using-indexes-to-subset-data">
<h3>Using Indexes to subset data<a class="headerlink" href="#using-indexes-to-subset-data" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath_rad</span> <span class="o">=</span> <span class="s1">&#39;./data/subset_f180628t01p00r02_corr_v1k1_img&#39;</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">full_dataset</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="using-window-to-subset-data">
<h2>Using <code class="docutils literal notranslate"><span class="pre">Window</span></code> to subset data<a class="headerlink" href="#using-window-to-subset-data" title="Permalink to this headline">¶</a></h2>
<p><em>A lot of the code from this section comes from the <a class="reference external" href="https://rasterio.readthedocs.io/en/latest/topics/windowed-rw.html">rasterio docs</a>.</em></p>
<p>Windowed reading requires a bit more work up front, but it allows you to keep your transform geospatially updated in the event you want to save out your data.  This method involves using a rasterio object called <code class="docutils literal notranslate"><span class="pre">Window</span></code> to access your subset instead of indexing it directly.</p>
<p>The steps to this method are:</p>
<ol class="simple">
<li><p>create the window object</p></li>
<li><p>read the data from <code class="docutils literal notranslate"><span class="pre">src</span></code> using the window</p></li>
</ol>
<section id="creating-the-window-object">
<h3>Creating the <code class="docutils literal notranslate"><span class="pre">Window</span></code> object<a class="headerlink" href="#creating-the-window-object" title="Permalink to this headline">¶</a></h3>
<section id="sytnax-1">
<h4>Sytnax #1<a class="headerlink" href="#sytnax-1" title="Permalink to this headline">¶</a></h4>
<p>The syntax for a the subset chunk in rasterio is <code class="docutils literal notranslate"><span class="pre">Window</span></code> and the sytnax to use the <code class="docutils literal notranslate"><span class="pre">Window</span></code> object looks like this:</p>
<blockquote>
<div><p>Window(COLUMN_OFFSET, ROW_OFFSET, WIDTH, HEIGHT)</p>
</div></blockquote>
<p>The OFFSETs specify the row and column numbers of the upper left corner of your window.</p>
<p>So getting the 1000-1800th row and 200-420th column with a window object would look like <code class="docutils literal notranslate"><span class="pre">Window(200,</span> <span class="pre">1000,</span> <span class="pre">220,</span> <span class="pre">800)</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rasterio.windows</span> <span class="kn">import</span> <span class="n">Window</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Window(col_off=200, row_off=1000, width=220, height=800)
</pre></div>
</div>
</div>
</div>
</section>
<section id="syntax-2">
<h4>Syntax #2<a class="headerlink" href="#syntax-2" title="Permalink to this headline">¶</a></h4>
<p>Another way to create the window is to use the <code class="docutils literal notranslate"><span class="pre">.from_slices()</span></code> method.</p>
<blockquote>
<div><p>Window.from_slices((ROW_START, ROW_STOP), (COLUMN_START, COLUMNS_STOP))</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="o">.</span><span class="n">from_slices</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1800</span><span class="p">),</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">420</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Window(col_off=200, row_off=1000, width=220, height=800)
</pre></div>
</div>
</div>
</div>
<p>These two are equivalent ways to do the same thing, so we can can see in the output that this gives us the same window as above.</p>
</section>
</section>
<section id="reading-the-data-with-the-window">
<h3>Reading the data with the <code class="docutils literal notranslate"><span class="pre">Window</span></code><a class="headerlink" href="#reading-the-data-with-the-window" title="Permalink to this headline">¶</a></h3>
<p>To read the data out we use our regular <code class="docutils literal notranslate"><span class="pre">src.read()</span></code> method but this time we specify <code class="docutils literal notranslate"><span class="pre">window</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rasterio</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath_rad</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">my_window</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
    <span class="n">window_data</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">my_window</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">window_data</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(224, 0, 175)
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">📝 Check your understanding</p>
<p>If using the syntax</p>
<blockquote>
<div><p>Window(COLUMN_OFFSET, ROW_OFFSET, WIDTH, HEIGHT)</p>
</div></blockquote>
<p>how many pixels would the code <code class="docutils literal notranslate"><span class="pre">Window(15,</span> <span class="pre">30,</span> <span class="pre">10,</span> <span class="pre">10)</span></code> return?</p>
</div>
</section>
</section>
<section id="language-agnostic-what-s-my-workflow">
<h2>Language Agnostic: What’s my workflow?<a class="headerlink" href="#language-agnostic-what-s-my-workflow" title="Permalink to this headline">¶</a></h2>
<p>At this point you’ve seen how to do many tasks in ENVI and in Python.  For example:</p>
<ul class="simple">
<li><p>viewing specific pixel reflectance values</p></li>
<li><p>getting a z transect</p></li>
<li><p>statistics on the full raster</p></li>
<li><p>statistics on a subset of a raster</p></li>
<li><p>defining an ROI</p></li>
</ul>
<p>When it comes time for you to do this in your reseach, how might you choose which tool to use?</p>
<section id="questions-to-consider">
<h3>Questions to consider<a class="headerlink" href="#questions-to-consider" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>What would the steps look like in the different options?</p></li>
<li><p>What are the technical pros/cons to each option?</p></li>
<li><p>Which options do I know exactly what to do and in which options would I need to be experimenting?</p></li>
<li><p>Is there a skill I am interested in gaining that makes it worth extra time?</p></li>
<li><p>Who are the resources I have to support me if I get stuck?</p></li>
</ul>
</section>
<section id="coding-in-python-in-notebooks">
<h3>Coding in Python in notebooks<a class="headerlink" href="#coding-in-python-in-notebooks" title="Permalink to this headline">¶</a></h3>
<p><em>Pros</em></p>
<ul class="simple">
<li><p>highly customizable, most flexibilty</p></li>
<li><p>easily repeated if scalaing is needed</p></li>
</ul>
<p><em>Cons</em></p>
<ul class="simple">
<li><p>slower</p></li>
<li><p>visualizations are not interactive</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./additional_lectures/rasters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="2_raster_fundamentals.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Working with rasters</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../Visualization/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Visualization</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Rachel Wegener<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>